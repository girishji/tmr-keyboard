Based on your usage requirements, the **maximum average power** the LED matrix can draw during active use is approximately **$232 \text{ mW}$** (or $62.7 \text{ mA}$ average current).

This calculation assumes a nominal battery voltage of **$3.7\text{V}$** (typical for Li-ion/Li-Po) and accounts for the power consumed by the microcontroller and LED driver chip.

---

## 1. Required Active Current Calculation

The $4000 \text{mAh}$ battery must supply all the current needed for one week, with $56$ hours of active use. We assume the system is in deep sleep for the remaining time, making the sleep current negligible.

| Parameter | Value | Calculation |
| :--- | :--- | :--- |
| **Total Active Usage Time** | $56 \text{ hours}$ | $7 \text{ days} \times 8 \text{ hours/day}$ |
| **Max Total Active Current** | $\approx 71.43 \text{ mA}$ | $\frac{4000 \text{ mAh}}{56 \text{ h}}$ |
| **Estimated System Overhead** | $\approx 8.77 \text{ mA}$ | Current for MCU (nRF52840, $\approx 6.6 \text{ mA}$) + LED Driver (IS31FL3731 quiescent, $\approx 2.17 \text{ mA}$) |
| **Max Average LED Matrix Current** | **$\approx 62.66 \text{ mA}$** | $71.43 \text{ mA} - 8.77 \text{ mA}$ |

---

## 2. Maximum Average LED Matrix Power

Using the calculated maximum current and the battery's nominal voltage ($\text{V}_{\text{batt}}=3.7\text{V}$):

$$\text{P}_{\text{max}} = \text{I}_{\text{LED\_max}} \times \text{V}_{\text{batt}}$$
$$\text{P}_{\text{max}} = 62.66 \text{ mA} \times 3.7\text{V} \approx 231.84 \text{ mW}$$

Therefore, the maximum power the LED matrix can draw is **$231.84 \text{ mW}$** on average during your 8 hours of daily use.

---

## Practical Implication for Brightness

To put the $\mathbf{62.66 \text{ mA}}$ maximum average current into context using the **IS31FL3731** driver (as discussed previously, which drives a $16 \times 9$ matrix with 144 LEDs):

* The IS31FL3731 draws $\approx 180 \text{ mA}$ when all 144 LEDs are driven at their **maximum average brightness** (assuming a $20 \text{k}\Omega$ external resistor).

Since your allowed current ($62.66 \text{ mA}$) is significantly **lower** than the maximum possible draw ($180 \text{ mA}$), you would have to **limit the brightness** of your LED matrix to maintain the week-long battery life.

$$\text{Max Brightness Percentage} \approx \frac{62.66 \text{ mA}}{180 \text{ mA}} \approx 34.8\%$$

You would need to set the software dimming register to a level equivalent to about **$35\%$** of the maximum possible brightness for the whole matrix to last a week.
